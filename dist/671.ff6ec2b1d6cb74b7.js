"use strict";(self.webpackChunkpazzioli_front=self.webpackChunkpazzioli_front||[]).push([[671],{671:(z,d,e)=>{e.r(d),e.d(d,{AutenticacionModule:()=>J});var l=e(6895),p=e(6630),a=e(4006),t=e(4650),u=e(1541),m=e(1005),f=e(5041),g=e(5412),x=e(5818),h=e(4067),v=e(5657),b=e(7392),C=e(4859),c=e(9549),Z=e(4144),y=e(4385),I=e(3238),w=e(1572);const _=["inUsuario"],j=["inContrasena"];function T(n,r){if(1&n){const i=t.EpF();t.TgZ(0,"div",24)(1,"div",25)(2,"button",26),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(3);return t.KtG(s.cancelar())}),t._uU(3,"cancelar"),t.qZA()(),t.TgZ(4,"div",25)(5,"button",26),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(3);return t.KtG(s.cerrarsesionuser())}),t._uU(6,"cerrar"),t.qZA()()()}}function U(n,r){if(1&n&&(t.TgZ(0,"div",21)(1,"span",22),t._uU(2),t.qZA(),t.YNc(3,T,7,0,"div",23),t.qZA()),2&n){const i=t.oxw(2);t.xp6(2),t.Oqu(i.mensaje),t.xp6(1),t.Q6J("ngIf",i.botoncierresesion)}}function S(n,r){if(1&n&&(t.TgZ(0,"div",27)(1,"span",28),t._uU(2),t.qZA()()),2&n){const i=t.oxw(2);t.xp6(2),t.Oqu(i.mensajedone)}}function A(n,r){if(1&n&&(t.TgZ(0,"mat-option",29),t._uU(1),t.qZA()),2&n){const i=r.$implicit,o=t.oxw(2);t.Q6J("value",i.base_datos)("disabled",o.campovisible),t.xp6(1),t.hij(" ",i.empresa," ")}}function k(n,r){if(1&n){const i=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"div",5),t.YNc(3,U,4,2,"div",6),t.TgZ(4,"div",7)(5,"mat-form-field",8)(6,"mat-label"),t._uU(7,"Identificacion"),t.qZA(),t._UZ(8,"input",9,10),t.TgZ(10,"mat-icon",11),t._uU(11,"person"),t.qZA()(),t.TgZ(12,"div",12)(13,"button",13),t.NdJ("click",function(){t.CHM(i);const s=t.oxw();return t.KtG(s.traerempresas())}),t._uU(14," Validar identificacion "),t.qZA()()(),t.TgZ(15,"div",7),t.YNc(16,S,3,1,"div",14),t.TgZ(17,"mat-form-field",8)(18,"mat-label"),t._uU(19,"Nombre de usuario"),t.qZA(),t._UZ(20,"input",9,10),t.TgZ(22,"mat-icon",11),t._uU(23,"person"),t.qZA()()(),t.TgZ(24,"div",7)(25,"mat-form-field",8)(26,"mat-label"),t._uU(27,"Contrase\xf1a"),t.qZA(),t._UZ(28,"input",15,16),t.TgZ(30,"mat-icon",11),t._uU(31,"lock"),t.qZA()()(),t.TgZ(32,"div",7)(33,"mat-form-field",8)(34,"mat-label"),t._uU(35,"Seleccione la sede"),t.qZA(),t.TgZ(36,"mat-select",17),t.YNc(37,A,2,3,"mat-option",18),t.qZA(),t.TgZ(38,"mat-error"),t._uU(39,"campo requerido"),t.qZA()()(),t.TgZ(40,"div",7)(41,"button",19),t.NdJ("click",function(){t.CHM(i);const s=t.oxw();return t.KtG(s.login())}),t._uU(42," Iniciar sesi\xf3n "),t.qZA()()()(),t._UZ(43,"div",20),t.qZA()}if(2&n){const i=t.oxw();t.xp6(3),t.Q6J("ngIf",""!==i.mensaje),t.xp6(5),t.Q6J("formControl",i.inputdocumento)("disabled",i.campovisible),t.xp6(8),t.Q6J("ngIf",i.mensajedone),t.xp6(4),t.Q6J("formControl",i.inputUsuario)("disabled",i.campovisible),t.xp6(8),t.Q6J("formControl",i.inputpassword)("disabled",i.campovisible),t.xp6(8),t.Q6J("formControl",i.selectSedes),t.xp6(1),t.Q6J("ngForOf",i.data),t.xp6(4),t.Q6J("disabled",i.campovisible)}}const M=[{path:"login",component:(()=>{class n{constructor(i,o,s,Q,P,Y,F,N){this.socketprodu=i,this.router=o,this.socketServices=s,this.app=Q,this.dialog=P,this.crypt=Y,this.serviauth=F,this.cookieservices=N,this.title="",this.inputUsuario=new a.p4("",[a.kI.required]),this.inputpassword=new a.p4("",[a.kI.required]),this.inputdocumento=new a.p4("",[a.kI.required]),this.selectSedes=new a.p4("",[a.kI.required]),this.loader=!1,this.mensaje="",this.botoncierresesion=!1,this.campovisible=!0,this.mensajedone="",this.inputUsuario.disable(),this.inputpassword.disable(),this.selectSedes.disable()}traerempresas(){this.serviauth.traerempresa(this.inputdocumento.value).subscribe(i=>{i.data.length>0?(this.data=i.data,this.inputUsuario.enable(),this.inputpassword.enable(),this.selectSedes.enable(),this.campovisible=!1,this.mensajedone="Identificaci\xf3n verificada"):(this.mensaje="Identificaci\xf3n no registrada",this.inputUsuario.disable(),this.inputpassword.disable(),this.selectSedes.disable(),this.campovisible=!0,setTimeout(()=>{this.mensaje=""},4e3))})}limpiarimputs(){this.inputUsuario.setValue(""),this.inputpassword.setValue(""),this.selectSedes.setValue("")}cancelar(){this.botoncierresesion=!1,this.mensaje="",this.limpiarimputs()}cerrarsesionuser(){this.serviauth.salir().subscribe(i=>{this.botoncierresesion=!1,this.mensaje="",this.login()},i=>{})}login(){this.serviauth.login({user:this.inputUsuario.value,documento:this.inputdocumento.value,password:this.inputpassword.value,db:this.selectSedes.value}).subscribe(i=>{i.autenticado&&(this.socketprodu.conectar(),window.location.reload())},i=>{i.error.opcion?(this.mensaje=i.error.mensaje,this.botoncierresesion=i.error.opcion):(this.mensaje=i.error.mensaje,this.limpiarimputs(),setTimeout(()=>{this.mensaje=""},4e3))})}ngOnInit(){}}return n.\u0275fac=function(i){return new(i||n)(t.Y36(u.R),t.Y36(p.F0),t.Y36(m.$),t.Y36(f.y),t.Y36(g.uw),t.Y36(x.j),t.Y36(h.e),t.Y36(v.N))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-inicio-sesion"]],viewQuery:function(i,o){if(1&i&&(t.Gf(_,5),t.Gf(j,5)),2&i){let s;t.iGM(s=t.CRH())&&(o.inUsuario=s.first),t.iGM(s=t.CRH())&&(o.inContrasena=s.first)}},decls:4,vars:7,consts:[[1,"loader","loader-fixed",3,"diameter","strokeWidth"],[1,"loader","loader-text","mat-text-primary",2,"position","fixed !important"],["class","col-12 m-auto p-0 row","style","\n    display: flex;\n    padding: 20px !important;\n    justify-content: center;\n    margin: auto !important;\n    height: 100%;\n  ","class","loginpa",4,"ngIf"],[1,"loginpa",2,"display","flex","padding","20px !important","justify-content","center","margin","auto !important","height","100%"],[1,"logindiv",2,"flex","0 2 50%","display","flex","justify-content","center","height","100%"],[2,"width","100%","height","50% !important"],["style","\n          background-color: #e74c3c;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          border-radius: 20px;\n          padding: 8px;\n          margin-bottom: 10px;\n          flex-direction: column;\n        ",4,"ngIf"],[1,"col-10","m-auto"],["appearance","fill"],["matInput","","placeholder","Ingrese su usuario","autocomplete","off",3,"formControl","disabled"],["inUsuario",""],["matSuffix",""],[2,"width","100%","text-align","end"],["mat-button","",1,"botonvalida",2,"color","#abb2b9",3,"click"],["style","\n            display: flex;\n            width: 100%;\n            background-color: #5db5f2;\n            padding: 5px;\n            justify-content: center;\n            border-radius: 80px;\n            margin-bottom: 2px;\n          ",4,"ngIf"],["matInput","","type","password","placeholder","Ingrese su contrase\xf1a","autocomplete","off",3,"formControl","disabled"],["inContrasena",""],[3,"formControl"],[3,"value","disabled",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary","full-button","",2,"background-color","rgb(157, 217, 4) !important","color","#fff !important",3,"disabled","click"],[1,"col-12","col-sm-8","col-md-6","col-lg-8","loginback",2,"flex","1 1 200px"],[2,"background-color","#e74c3c","display","flex","justify-content","center","align-items","center","border-radius","20px","padding","8px","margin-bottom","10px","flex-direction","column"],[2,"color","#ffff","text-align","end"],["style","display: flex; justify-content: space-between; width: 100%",4,"ngIf"],[2,"display","flex","justify-content","space-between","width","100%"],[1,"example-button-row",2,"width","50%","display","flex","justify-content","center"],["mat-button","",3,"click"],[2,"display","flex","width","100%","background-color","#5db5f2","padding","5px","justify-content","center","border-radius","80px","margin-bottom","2px"],[2,"color","#fff","font-size","1rem"],[3,"value","disabled"]],template:function(i,o){1&i&&(t._UZ(0,"mat-spinner",0),t.TgZ(1,"label",1),t._uU(2,"Espere..."),t.qZA(),t.YNc(3,k,44,11,"div",2)),2&i&&(t.ekj("shown",o.loader),t.Q6J("diameter",50)("strokeWidth",3),t.xp6(1),t.ekj("shown",o.loader),t.xp6(2),t.Q6J("ngIf",!o.loader))},dependencies:[l.sg,l.O5,b.Hw,C.lW,c.TO,c.KE,c.hX,c.R9,Z.Nt,y.gD,I.ey,a.Fj,a.JJ,a.oH,w.Ou],styles:[".loginback[_ngcontent-%COMP%]{background:url(pazzioli.40d3738aec0dc867.png);background-size:200px;background-repeat:no-repeat;background-position:center}  .ng-tns-c83-1{padding-bottom:2px}  .botonvalida:hover{color:#5db5f2!important}@media (max-width: 821px){.logindiv[_ngcontent-%COMP%]{align-items:center!important}}@media (max-width: 760px){.loginpa[_ngcontent-%COMP%]{flex-direction:column-reverse}.logindiv[_ngcontent-%COMP%]{align-items:start!important}}.hidden[_ngcontent-%COMP%]{display:none}.login-form[_ngcontent-%COMP%]{background:rgba(255,255,255,.2);box-shadow:0 0 82px 130px #fff!important}.login-text[_ngcontent-%COMP%]{font-size:30px;text-shadow:-1px 1px 100px rgba(0,0,0,.92),1px 1px 100px rgba(0,0,0,.44),1px -1px 100px rgba(0,0,0,.71),-1px -1px 100px rgba(0,0,0,.185);color:#fff}.example-button-row[_ngcontent-%COMP%]{display:table-cell;max-width:600px}.example-button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;max-width:90px;width:90PX}.example-button-row[_ngcontent-%COMP%]   .mat-mdc-button-base[_ngcontent-%COMP%]{margin:8px 8px 8px 0}"]}),n})(),data:{title:"Iniciar sesi\xf3n"}}];var O=e(9842);let J=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.ez,p.Bz.forChild(M),O.q]}),n})()}}]);