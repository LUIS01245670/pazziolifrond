"use strict";(self.webpackChunkpazzioli_front=self.webpackChunkpazzioli_front||[]).push([[671],{671:(N,d,n)=>{n.r(d),n.d(d,{AutenticacionModule:()=>O});var c=n(6895),p=n(6630),a=n(4006),t=n(4650),u=n(1541),m=n(1005),f=n(5041),g=n(5412),h=n(5818),x=n(4067),v=n(5657),b=n(7392),C=n(4859),l=n(9549),Z=n(4144),y=n(4385),I=n(3238),U=n(1572);const w=["inUsuario"],T=["inContrasena"];function j(e,r){if(1&e){const i=t.EpF();t.TgZ(0,"div",23)(1,"div",24)(2,"button",25),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(3);return t.KtG(s.cancelar())}),t._uU(3,"cancelar"),t.qZA()(),t.TgZ(4,"div",24)(5,"button",25),t.NdJ("click",function(){t.CHM(i);const s=t.oxw(3);return t.KtG(s.cerrarsesionuser())}),t._uU(6,"cerrar"),t.qZA()()()}}function _(e,r){if(1&e&&(t.TgZ(0,"div",20)(1,"span",21),t._uU(2),t.qZA(),t.YNc(3,j,7,0,"div",22),t.qZA()),2&e){const i=t.oxw(2);t.xp6(2),t.Oqu(i.mensaje),t.xp6(1),t.Q6J("ngIf",i.botoncierresesion)}}function S(e,r){if(1&e&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&e){const i=r.$implicit,o=t.oxw(2);t.Q6J("value",i.base_datos)("disabled",o.campovisible),t.xp6(1),t.hij(" ",i.empresa," ")}}function A(e,r){if(1&e){const i=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"div",5),t.YNc(3,_,4,2,"div",6),t.TgZ(4,"div",7)(5,"mat-form-field",8)(6,"mat-label"),t._uU(7,"Identificacion"),t.qZA(),t._UZ(8,"input",9,10),t.TgZ(10,"mat-icon",11),t._uU(11,"person"),t.qZA()(),t.TgZ(12,"div",12)(13,"button",13),t.NdJ("click",function(){t.CHM(i);const s=t.oxw();return t.KtG(s.traerempresas())}),t._uU(14," Validar identificacion "),t.qZA()()(),t.TgZ(15,"div",7)(16,"mat-form-field",8)(17,"mat-label"),t._uU(18,"Nombre de usuario"),t.qZA(),t._UZ(19,"input",9,10),t.TgZ(21,"mat-icon",11),t._uU(22,"person"),t.qZA()()(),t.TgZ(23,"div",7)(24,"mat-form-field",8)(25,"mat-label"),t._uU(26,"Contrase\xf1a"),t.qZA(),t._UZ(27,"input",14,15),t.TgZ(29,"mat-icon",11),t._uU(30,"lock"),t.qZA()()(),t.TgZ(31,"div",7)(32,"mat-form-field",8)(33,"mat-label"),t._uU(34,"Seleccione la sede"),t.qZA(),t.TgZ(35,"mat-select",16),t.YNc(36,S,2,3,"mat-option",17),t.qZA(),t.TgZ(37,"mat-error"),t._uU(38,"campo requerido"),t.qZA()()(),t.TgZ(39,"div",7)(40,"button",18),t.NdJ("click",function(){t.CHM(i);const s=t.oxw();return t.KtG(s.login())}),t._uU(41," Iniciar sesi\xf3n "),t.qZA()()()(),t._UZ(42,"div",19),t.qZA()}if(2&e){const i=t.oxw();t.xp6(3),t.Q6J("ngIf",""!==i.mensaje),t.xp6(5),t.Q6J("formControl",i.inputdocumento)("disabled",i.campovisible),t.xp6(11),t.Q6J("formControl",i.inputUsuario)("disabled",i.campovisible),t.xp6(8),t.Q6J("formControl",i.inputpassword)("disabled",i.campovisible),t.xp6(8),t.Q6J("formControl",i.selectSedes),t.xp6(1),t.Q6J("ngForOf",i.data),t.xp6(4),t.Q6J("disabled",i.campovisible)}}const M=[{path:"login",component:(()=>{class e{constructor(i,o,s,J,P,Q,F,Y){this.socketprodu=i,this.router=o,this.socketServices=s,this.app=J,this.dialog=P,this.crypt=Q,this.serviauth=F,this.cookieservices=Y,this.title="",this.inputUsuario=new a.p4("",[a.kI.required]),this.inputpassword=new a.p4("",[a.kI.required]),this.inputdocumento=new a.p4("",[a.kI.required]),this.selectSedes=new a.p4("",[a.kI.required]),this.loader=!1,this.mensaje="",this.botoncierresesion=!1,this.campovisible=!0,this.inputUsuario.disable(),this.inputpassword.disable(),this.selectSedes.disable()}traerempresas(){this.serviauth.traerempresa(this.inputdocumento.value).subscribe(i=>{i.data.length>0?(this.data=i.data,this.inputUsuario.enable(),this.inputpassword.enable(),this.selectSedes.enable(),this.campovisible=!1,console.log(i.data)):(this.mensaje="identificacion no registrada",this.inputUsuario.disable(),this.inputpassword.disable(),this.selectSedes.disable(),this.campovisible=!0,setTimeout(()=>{this.mensaje=""},4e3))})}limpiarimputs(){this.inputUsuario.setValue(""),this.inputpassword.setValue(""),this.selectSedes.setValue("")}cancelar(){this.botoncierresesion=!1,this.mensaje="",this.limpiarimputs()}cerrarsesionuser(){this.serviauth.salir().subscribe(i=>{this.botoncierresesion=!1,this.mensaje="",this.login()},i=>console.log(i))}login(){console.log(this.inputUsuario.value),this.serviauth.login({user:this.inputUsuario.value,documento:this.inputdocumento.value,password:this.inputpassword.value,db:this.selectSedes.value}).subscribe(i=>{console.log("si esta autenticado",i.autenticado),i.autenticado&&(this.socketprodu.conectar(),window.location.reload())},i=>{i.error.opcion?(this.mensaje=i.error.mensaje,this.botoncierresesion=i.error.opcion):(this.mensaje=i.error.mensaje,this.limpiarimputs(),setTimeout(()=>{this.mensaje=""},4e3))})}ngOnInit(){console.log("entro al login")}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(u.R),t.Y36(p.F0),t.Y36(m.$),t.Y36(f.y),t.Y36(g.uw),t.Y36(h.j),t.Y36(x.e),t.Y36(v.N))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-inicio-sesion"]],viewQuery:function(i,o){if(1&i&&(t.Gf(w,5),t.Gf(T,5)),2&i){let s;t.iGM(s=t.CRH())&&(o.inUsuario=s.first),t.iGM(s=t.CRH())&&(o.inContrasena=s.first)}},decls:4,vars:7,consts:[[1,"loader","loader-fixed",3,"diameter","strokeWidth"],[1,"loader","loader-text","mat-text-primary",2,"position","fixed !important"],["class","col-12 m-auto p-0 row","style","\n    display: flex;\n    padding: 20px !important;\n    justify-content: center;\n    margin: auto !important;\n    height: 100%;\n  ","class","loginpa",4,"ngIf"],[1,"loginpa",2,"display","flex","padding","20px !important","justify-content","center","margin","auto !important","height","100%"],[1,"logindiv",2,"flex","0 2 50%","display","flex","justify-content","center","height","100%"],[2,"width","100%","height","50% !important"],["style","\n          background-color: #e74c3c;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          border-radius: 20px;\n          padding: 8px;\n          margin-bottom: 10px;\n          flex-direction: column;\n        ",4,"ngIf"],[1,"col-10","m-auto"],["appearance","fill"],["matInput","","placeholder","Ingrese su usuario","autocomplete","off",3,"formControl","disabled"],["inUsuario",""],["matSuffix",""],[2,"width","100%","text-align","end"],["mat-button","",1,"botonvalida",2,"color","#abb2b9",3,"click"],["matInput","","type","password","placeholder","Ingrese su contrase\xf1a","autocomplete","off",3,"formControl","disabled"],["inContrasena",""],[3,"formControl"],[3,"value","disabled",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary","full-button","",3,"disabled","click"],[1,"col-12","col-sm-8","col-md-6","col-lg-8","loginback",2,"flex","1 1 200px"],[2,"background-color","#e74c3c","display","flex","justify-content","center","align-items","center","border-radius","20px","padding","8px","margin-bottom","10px","flex-direction","column"],[2,"color","#ffff","text-align","end"],["style","display: flex; justify-content: space-between; width: 100%",4,"ngIf"],[2,"display","flex","justify-content","space-between","width","100%"],[1,"example-button-row",2,"width","50%","display","flex","justify-content","center"],["mat-button","",3,"click"],[3,"value","disabled"]],template:function(i,o){1&i&&(t._UZ(0,"mat-spinner",0),t.TgZ(1,"label",1),t._uU(2,"Espere..."),t.qZA(),t.YNc(3,A,43,10,"div",2)),2&i&&(t.ekj("shown",o.loader),t.Q6J("diameter",50)("strokeWidth",3),t.xp6(1),t.ekj("shown",o.loader),t.xp6(2),t.Q6J("ngIf",!o.loader))},dependencies:[c.sg,c.O5,b.Hw,C.lW,l.TO,l.KE,l.hX,l.R9,Z.Nt,y.gD,I.ey,a.Fj,a.JJ,a.oH,U.Ou],styles:[".loginback[_ngcontent-%COMP%]{background:url(pazzioli.40d3738aec0dc867.png);background-size:200px;background-repeat:no-repeat;background-position:center}  .ng-tns-c83-1{padding-bottom:2px}  .botonvalida:hover{color:#5db5f2!important}@media (max-width: 821px){.logindiv[_ngcontent-%COMP%]{align-items:center!important}}@media (max-width: 760px){.loginpa[_ngcontent-%COMP%]{flex-direction:column-reverse}.logindiv[_ngcontent-%COMP%]{align-items:start!important}}.hidden[_ngcontent-%COMP%]{display:none}.login-form[_ngcontent-%COMP%]{background:rgba(255,255,255,.2);box-shadow:0 0 82px 130px #fff!important}.login-text[_ngcontent-%COMP%]{font-size:30px;text-shadow:-1px 1px 100px rgba(0,0,0,.92),1px 1px 100px rgba(0,0,0,.44),1px -1px 100px rgba(0,0,0,.71),-1px -1px 100px rgba(0,0,0,.185);color:#fff}.example-button-row[_ngcontent-%COMP%]{display:table-cell;max-width:600px}.example-button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;max-width:90px;width:90PX}.example-button-row[_ngcontent-%COMP%]   .mat-mdc-button-base[_ngcontent-%COMP%]{margin:8px 8px 8px 0}"]}),e})(),data:{title:"Iniciar sesi\xf3n"}}];var k=n(9842);let O=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.ez,p.Bz.forChild(M),k.q]}),e})()}}]);